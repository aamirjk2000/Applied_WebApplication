@page
@using System.Data;
@model Applied_WebApplication.Pages.ReportPrint.PurchaseReportsModel
@{
    var UserName = User.Identity.Name;
    var SelectCompany = AppFunctions.GetTitle(UserName, Tables.Customers, Model.Variables.CompanyID);
    var SelectInventory = AppFunctions.GetTitle(UserName, Tables.Inventory, Model.Variables.InventoryID);
    var DateFormat = AppRegistry.FormatDate;
}

<style>
    .input-group mb-3 {
        width: 80%
    }

    .form-control {
        width: 20%
    }

</style>

<div class="AppHeading-2">
    <h5 class="TextCenter">SALES REPORTS</h5>
</div>

<form method="post">



    <div class="container">
        <div class="row">

            <div class="col-md-2">
                <div class="input-group mb-3">
                    <span class="input-group-text" id="StartDate">Start</span>
                    <input type="date" class="form-control" asp-for="@Model.Variables.StartDate"
                           placeholder="Start Date" aria-label="Start Date" aria-describedby="txtVouDate">
                </div>
            </div>

            <div class="col-md-2">
                <div class="input-group mb-3">
                    <input type="date" class="form-control" asp-for="@Model.Variables.EndDate">
                    <span class="input-group-text" id="Enddate">End</span>
                </div>
            </div>

            <div class="col-md-3">
                <select class="form-select" aria-label="Select Company" asp-for="@Model.Variables.CompanyID">
                    <option selected>Select All</option>
                    @foreach (DataRow Row in DataTableClass.GetTable(UserName, Tables.Customers).Rows)
                    {
                        <option value="@Row["ID"]">@Row["Title"]</option>
                    }
                </select>
            </div>

            <div class="col-md-3">
                <select class="form-select" aria-label="Select Inventory" asp-for="@Model.Variables.InventoryID">
                    <option selected>Select All</option>
                    @foreach (DataRow Row in DataTableClass.GetTable(UserName, Tables.Inventory).Rows)
                    {
                        <option value="@Row["ID"]">@Row["Title"]</option>
                    }
                </select>
            </div>

            <div class="col-md-2">
                <button type="submit" class="btn btn-primary justify-content-end">REFRESH 6</button>
            </div>
        </div>
    </div>

    @if (Model.SourceTable != null)
    {
        if (Model.SourceTable.Rows.Count > 0)
        {
            <div class="container">
                <div class="row mb-2">
                    <div class="col-2">
                        <button class="btn btn-primary btn-sm" type="submit"
                                asp-page-handler="Print">
                            <i class="bi bi-printer"> PRINT</i>
                        </button>
                    </div>
                    <div class="col-2">
                        <button class="btn btn-primary btn-sm" type="submit"
                                asp-page-handler="PrintList">
                            <i class="bi bi-printer"> PRINT 2</i>
                        </button>
                    </div>
                </div>
            </div>


            <table>
                <thead>
                    <tr>
                        <th style="width:5%">SNo.</th>
                        <th style="width:10%">Vou. No</th>
                        <th style="width:10%">Vou. Date</th>
                        <th style="width:25%">Stock Title</th>
                        <th style="width:10%">Quantity</th>
                        <th style="width:10%">Rate</th>
                        <th style="width:10%">Amount</th>
                        <th style="width:10%">Tax Amount</th>
                        <th style="width:10%">Net Amount</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (DataRow Row in Model.SourceTable.Rows)
                    {
                        var _Date = ((DateTime)Row["Vou_Date"]).ToString(DateFormat);


                        <tr>
                            <td>@Row["Sr_No"]</td>
                            <td>@Row["Vou_No"]</td>
                            <td>@_Date</td>
                            <td>@Row["StockTitle"]</td>
                            <td>@Row["Qty"]</td>
                            <td>@Row["Rate"]</td>
                            <td>@Row["Amount"]</td>
                            <td>@Row["TaxAmount"]</td>
                            <td>@Row["NetAmount"]</td>
                        </tr>
                    }

                </tbody>
            </table>






        }
        else
        {
            <h5>No Record Found.....</h5>
        }
    }


</form>